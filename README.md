[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/logchecker.svg)](https://img.shields.io/pypi/pyversions/logchecker)
[![PyPI Latest Release](https://img.shields.io/pypi/v/logchecker.svg)](https://pypi.python.org/pypi/logchecker)
[![License](https://img.shields.io/pypi/l/logchecker.svg)](https://github.com/laimaretto/logChecker/blob/main/LICENSE)

# logChecker #

This idea was born because of the need for a simple tool in order to automate the execution of simple log analysis obtained from Nokia SROS routers. The tool reads the content of a log folder with files in `json` format and parses the pre defined variables.
It can be used to organize information into Excel tabs or to compare logs between two folders and does the comparison, thus verifying if there are changes in such variables. The logs are generated by the use of [`taskAutom`](https://github.com/laimaretto/taskAutom).

## Table of Contents
- [Setup](#setup)
  - [System Libraries](#system-libraries)
  - [Installation](#installation)
- [Usage](#usage)
  - [Configuration Options](#configuration-options)
  - [Templates](#templates)
    - [Filtering Variables of Templates](#filtering-variables-of-templates)
- [Results](#results)
  - [Tabulation of Logs - Assessment](#tabulation-of-logs---assessment)
  - [Comparision of Logs - Pre/Post Check](#comparision-of-logs---pre-and-post-check)

## Setup ##

### System Libraries
These libraries have been tested under Ubuntu 20.04 and 22.04 , Windows10, Python >= 3.8 and <= 3.10

### Installation

Make sure that you have [Python](https://www.python.org/downloads/) and [PIP](https://pip.pypa.io/en/stable/installing/) installed.

> [!NOTE]
> For Windows users, select "Add Python to PATH" during the installation.


For Ubuntu users:
```bash
sudo pip3 install logChecker
```
For Windows users:

```bash
pip install logChecker
```

The source code is hosted on GitHub at https://github.com/laimaretto/logchecker

Installer for the latest released version available at [Python Package Index (PyPI) - LogChecker](https://pypi.org/project/logchecker)



[Go to Table of Contents](#table-of-contents)


## Usage

LogChecker uses the logs contained in the folders generated by [`taskAutom`](https://github.com/laimaretto/taskAutom). Though not mandatory, `taskAutom` is suggested as a way of obtaining the logs, because these will be stored in a `json` file automatically.

Organizes the "show" commands on tabs in an Excel file, helping the verification of information. The data parsing is performed using [templates](#templates).

There are two ways of execution: [tabulation of logs of one folder](#tabulation-of-logs---assessment) or [comparing the logs of two folders](#comparision-of-logs---pre-and-post-check).

### Configuration Options

LogChecker can be configured through CLI as shown below. It is also possible to run `logchecker -h` directly to show this information.

| Parameter  | Description |
| -------------------: | :---------- |
|`-h` | Show all the parameters and exit. |
|`-pre` | Folder with Pre logs. Must end in "/" |
|`-post` | Folder with Post logs. Must end in "/" |
|`-json` | Logs in `json` format: yes or no. Default = yes.|
|`-tf` | Folder where templates reside. Used both for Pre and Post logs. Default = Templates/  |
|`-tf-post` | If set, use this folder of templates for Post logs |
|`-te` | Engine for parsing. Default = textFSM |
|`-ri` | Router ID to be used within the tables in Excel report: name, ip or both. Default = name |
|`-ga` | Generate ATP document in `.docx` format, based on contents of json files from `taskAutom`. Default = no |
|`-ic` | Adds new column (Idx Pre/Post) in changes detected table, when running comparision. Default = no  |
|`-v` | Show version |

### Templates

The templates are looked by default at the folder `Templates/`. logChecker reads the template folder to perform the function of parsing.

If the indicated folder in `-tf` is missing or if a command/log don't match with any template available in the specified folder with templates, the parsing is done with a general template, which is already configured in the tool.

In cases where different versions of TiMOS are used for Pre logs and Post logs, it's possible to use `-tf` to specify the template folder for the `-pre` logs and `-tf-post` to specify the template folder for the `-post` logs.


<!---To find out a set of Templates that can be used, see [`here`](https://github.com/laimaretto/logTemplates)-->
### Filtering Variables of Templates

If there is a need to filter variables already defined in a template, is it possible to modify it by simply adding `#filterColumns:` with the option `exclude` or `include-only` and listing the variables in `#filterAction:`.

When using `#filterColumns: exclude`, all the variables in `#filterAction` will be removed from the the Excel tab generated for this command.

Similarly, if using `#filterColumns: include-only`, the specified variables in `#filterAction` are kept, while all others are removed.


[Go to Table of Contents](#table-of-contents)

## Results

Here are two examples of how to run logchecker.

All the parameters are in [Configuration Options](#configuration-options).


### Tabulation of logs - Assessment

When indicating a folder with logs for the tool, information is organized on several tabs of the resulting Excel report.

In this option, the program needs at least one input: a folder indicated in `-pre` parameter, which contains the logs obtained from a router via `taskAutom`. 

```bash
logchecker -pre logs_pre/
##### Successfully Loaded Templates from folder Templates\ #####
##### Logs Loaded Successfully from folder logs_pre/ #####

Saving Excel
# 0 sh_srv_srv_using.template
# 1 sh_srv_sdp_using.template
# 2 sh_srv_sap_using.template
# 3 sh_srv_sdp.template
# 4 sh_port.template
# 5 sh_rtr_iface.template

Total time to run: 0.45 seconds
```


### Comparision of logs - Pre and post check

When two folders are indicated as input for the tool (parameters `-pre` and `-post`), aÂ comparison of the logs is performed.

```bash
logchecker -pre logs_pre/ -post logs_post/
##### Successfully Loaded Templates from folder Templates\ #####
##### Successfully Loaded Templates from folder Templates\ #####
##### Logs Loaded Successfully from folder logs_pre/ #####
##### Logs Loaded Successfully from folder logs_post/ #####

Saving Excel
# 0 sh_srv_srv_using.template
# 1 sh_srv_sdp_using.template
# 2 sh_srv_sap_using.template
# 3 sh_srv_sdp.template
# 4 sh_port.template
# 5 sh_rtr_iface.template

Total time to run: 0.46 seconds
```

[Go to Table of Contents](#table-of-contents)